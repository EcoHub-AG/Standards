{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "description": "Schema for the feedback regarding an offer in the Offer NLPI process. This schema is publicly accessible for informational purposes only. Usage requires prior authorization from EcoHub AG.",
  "x-ecohub-license": "Â© 2025 EcoHub AG. Usage restricted. Prior written authorization required. Swiss law applies. Jurisdiction: Zurich.",
  "type": "object",
  "properties": {
    "processIdentificationNo": {
      "$ref": "../../../Generics/v1.0.0/ProcessIdentificationNoType.json"
    },
    "timestamp": {
      "$ref": "../../../Generics/v1.0.0/TimestampType.json"
    },
    "processName": {
      "$ref": "../offer-nlpi-types/ProcessNameConstType.json"
    },
    "subProcessName": {
      "description": "Name of the subprocess",
      "type": "string",
      "const": "feedback"
    },
    "processVersion": {
      "$ref": "../offer-nlpi-types/ProcessVersionConstType.json"
    },
    "header": {
      "$ref": "../../../Generics/v1.0.0/HeaderType.json"
    },
    "quotationNo": {
      "$ref": "../../../Generics/v1.0.0/QuotationNoType.json"
    },
    "offerDecision": {
      "description": "Decision whether an offer is accepted or rejected",
      "type": "string",
      "enum": [
        "Offer accepted",
        "Offer rejected"
      ]
    },
    "offerAcceptance": {
      "$ref": "../offer-nlpi-types/OfferAcceptanceType.json"
    },
    "offerFeedbackMessage": {
      "$ref": "../../../Generics/v1.0.0/RestrictedStringType.json",
      "description": "Feedback text for the offer acceptance or rejection decision. Mandatory if the offer is rejected."
    },
    "brokerContact": {
      "description": "The contact is the employee at the broker who is responsible for the offer request (e.g. a backoffice employee).",
      "$ref": "../../../Generics/v1.0.0/ContactType.json"
    }
  },
  "additionalProperties": false,
  "required": [
    "processIdentificationNo",
    "timestamp",
    "processName",
    "subProcessName",
    "processVersion",
    "header",
    "quotationNo",
    "offerDecision",
    "brokerContact"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "offerDecision": {
            "const": "Offer accepted"
          }
        }
      },
      "then": {
        "required": [
          "offerAcceptance"
        ]
      }
    }
  ],
  "unevaluatedProperties": false
}